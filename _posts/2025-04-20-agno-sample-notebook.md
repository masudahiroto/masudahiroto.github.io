---
layout: post
title: AgnoでAIエージェントを作る
---

Agnoフレームワークによる基本的なエージェントの実装例を紹介します。

下記のリンクから jupyter notebook 形式で見れます。

[https://gist.github.com/masudahiroto/599a3fd9d32965e66812b3b39b9fc0c6](https://gist.github.com/masudahiroto/599a3fd9d32965e66812b3b39b9fc0c6)

## 0. Agnoとは

Agnoは、AI言語モデルを活用したエージェントを簡単に構築できるPythonフレームワークです。

### 0.1. 環境構築 

このノートブックでは、OpenAIのAPIを使用したAgnoのエージェントの実装例を紹介します。環境変数 OPENAI_API_KEY にAPIキーを登録する必要があります。APIリクエストで **OpenAIの料金がかかります** 。

```bash
export OPENAI_API_KEY="sk-xxx..."
```

`pyproject.toml`に従って、実行に必要なpythonパッケージをインストールしてください。（`uv`を使用。）

```python
!cat pyproject.toml
```

```toml
[project]
name = "599a3fd9d32965e66812b3b39b9fc0c6"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "agno>=1.3.4",
    "duckduckgo-search>=8.0.1",
    "jupyter>=1.1.1",
    "mcp>=1.6.0",
    "openai>=1.75.0",
    "sqlalchemy>=2.0.40",
    "yfinance>=0.2.55",
]

```

## 1. 基本的なエージェント

最も基本的なエージェントの実装例です。OpenAIのモデルを使って単純な質問応答を行います。単純に生成AIモデルがユーザークエリに対して回答をするだけになります。モデルの持つ知識の範囲内での回答となります。

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat

# エージェントの定義
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    description="You are a helpful assistant.",
    markdown=True  # Markdown 形式での出力を有効にする
)

agent.print_response("こんにちは。お元気ですか？", stream=True)
```

```text
▰▰▰▰▰▰▰ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ こんにちは。お元気ですか？                                                                                      ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (1.2s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ こんにちは！私は元気です。あなたはいかがですか？何かお手伝いできることがあれば教えてください。                  ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 2. ストレージ機能を持つエージェント

上記のエージェントの状態だと、複数回エージェントとやり取りした時に過去の会話（文脈）を記録していません。過去の会話内容を保存してやりとりするにはセッションを使用します。セッションIDを使用してDB上に記録していき、2回目以降の回答生成時に参照します。

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.storage.sqlite import SqliteStorage

# セッション履歴保存用のSQLiteストレージを設定（テーブル名とファイルパスを指定）
storage = SqliteStorage(table_name="agent_sessions", db_file="tmp/agents.db")

# エージェントの作成（会話履歴を自動保存・読み込みする設定）
agent = Agent(
    session_id="demo_session_1",                  # セッションIDを固定値に設定
    model=OpenAIChat(id="gpt-4o-mini"),   # 対話に用いるモデル
    storage=storage,                              # ストレージを組み込んで履歴管理
    add_history_to_messages=True,                 # 過去メッセージをプロンプトに含める
    num_history_runs=3,                           # 直近3ターン分の履歴を利用
    markdown=True
)

# 対話の開始
print("Session ID:", agent.session_id)
agent.print_response("カナダの人口は何人ですか？", stream=True)
agent.print_response("その国歌は何ですか？", stream=True)
agent.print_response("今までのやりとりを箇条書きで教えて", stream=True)
```

```text
▰▱▱▱▱▱▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ カナダの人口は何人ですか？                                                                                      ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (3.5s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 2023年の時点で、カナダの人口は約3,800万人と推定されています。この数値は年によって変動するため、最新の人口データ ┃
┃ はカナダ統計局などの公式な情報源で確認することをお勧めします。                                                  ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
▰▰▰▱▱▱▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ その国歌は何ですか？                                                                                            ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (2.9s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ カナダの国歌は「O Canada（オー・カナダ）」です。以下に詳細をまとめます。                                        ┃
┃                                                                                                                 ┃
┃                                         O Canada（オー・カナダ）の概要                                          ┃
┃                                                                                                                 ┃
┃  • 作曲者: クール・ア・ベルトン（Calixa                                                                         ┃
┃    Lavallée）によって音楽が作られ、英語の歌詞はアドリアン・アルフレッド（Robert Stanley                         ┃
┃    Weir）によって追加されました。                                                                               ┃
┃  • 制定年: 1980年に正式に国歌として制定されましたが、1867年に初めて作曲されています。                           ┃
┃  • テーマ: カナダの自然、自由、愛国心をテーマにしており、国の美しさや誇り高い精神が表現されています。           ┃
┃  • 言語: 歌詞は英語とフランス語で提供され、両方の言語が使用されることがあります。                               ┃
┃  • 演奏シーン: 国の祝典や特別なイベントなどで頻繁に演奏されます。                                               ┃
┃                                                                                                                 ┃
┃ 「O Canada」はカナダのアイデンティティを象徴する重要な歌です。                                                  ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
▰▱▱▱▱▱▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 今までのやりとりを箇条書きで教えて                                                                              ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (3.9s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 以下が今までのやり取りの要約です：                                                                              ┃
┃                                                                                                                 ┃
┃  1 質問: カナダの人口は何人ですか？                                                                             ┃
┃     • 回答: 2023年のカナダの人口は約3,800万人と推定されています。                                               ┃
┃  2 質問: その国歌は何ですか？                                                                                   ┃
┃     • 回答: カナダの国歌は「O Canada（オー・カナダ）」です。                                                    ┃
┃        • 作曲者: クール・ア・ベルトン（Calixa Lavallée）とアドリアン・アルフレッド（Robert Stanley Weir）。     ┃
┃        • 制定年: 1980年に正式に国歌として制定。                                                                 ┃
┃        • テーマ: 自然、自由、愛国心を表現。                                                                     ┃
┃        • 言語: 英語とフランス語で歌われることがある。                                                           ┃
┃        • 演奏シーン: 特別なイベントや祝典で頻繁に演奏される。                                                   ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 3. ツールを使用したエージェント

エージェントにツールを持たせることができます。エージェントが回答生成時に自律的にツールを呼び出します。ツールの呼び出しの結果を使い最終的な回答生成を行います。次の例ではDuckDuckGo (web上の検索ツール) を統合して、ウェブ検索機能を持つエージェントを実装します。

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools

# Initialize the agent
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    description="You are an AI assistant capable of searching the web using DuckDuckGo.",
    tools=[DuckDuckGoTools()],
    show_tool_calls=True,
    markdown=True
)

# Example query
agent.print_response("最新のAppleのニュースを教えてください。", stream=True)
```

```text
▰▱▱▱▱▱▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 最新のAppleのニュースを教えてください。                                                                         ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Tool Calls ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ • duckduckgo_news(query=Apple, max_results=5)                                                                   ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (12.3s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ こちらが最新のAppleに関するニュースです。                                                                       ┃
┃                                                                                                                 ┃
┃ 🌆 Image                                                                                                        ┃
┃ 🌆 Image                                                                                                        ┃
┃ 🌆 Image                                                                                                        ┃
┃ 🌆 Image                                                                                                        ┃
┃ 🌆 Image                                                                                                        ┃
┃  1 Mark Zuckerberg's Facebook, Instagram block new Apple product                                                ┃
┃    日付: 2025年4月19日                                                                                          ┃
┃    FacebookとInstagramが新しいApple製品をブロックしています。                                                   ┃
┃                                                                                                                 ┃
┃    出典: TheStreet                                                                                              ┃
┃  2 Update now: Apple issues emergency iPhone fix for zero-day vulnerabilities                                   ┃
┃    日付: 2025年4月17日                                                                                          ┃
┃    AppleがiPhoneのゼロデイ脆弱性に対する緊急修正を発表しました。                                                ┃
┃                                                                                                                 ┃
┃    出典: Mashable                                                                                               ┃
┃  3 Apple says zero-day bugs exploited against 'specific targeted individuals' using iOS                         ┃
┃    日付: 2025年4月16日                                                                                          ┃
┃    AppleがゼロデイバグがiOSを使用する「特定のターゲット個人」に対して悪用されたと述べています。                 ┃
┃                                                                                                                 ┃
┃    出典: TechCrunch                                                                                             ┃
┃  4 Apple Foldable iPhone May Have Face ID Embedded in the Screen                                                ┃
┃    日付: 2025年4月19日                                                                                          ┃
┃    Appleの折りたたみiPhoneに顔認証技術が画面に埋め込まれる可能性があります。                                    ┃
┃                                                                                                                 ┃
┃    出典: CNET                                                                                                   ┃
┃  5 Designed in US, made in China: Why Apple is stuck                                                            ┃
┃    日付: 2025年4月20日                                                                                          ┃
┃    Appleは米国で設計されたが、中国で製造されているため、さまざまな課題に直面しています。                        ┃
┃                                                                                                                 ┃
┃    出典: Yahoo Singapore                                                                                        ┃
┃                                                                                                                 ┃
┃ これらのニュースは、Appleが直面しているセキュリティ課題や製品開発についての最新情報を提供しています。           ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 4. メモリ機能を持つエージェント

会話からユーザーに関する情報を抽出し保存することが出来ます。ユーザーの情報はDB上に保存されます。エージェントが必要なユーザーの情報を必要に応じてDB上から取得し、回答生成に利用します。保存するユーザー情報の判断と、回答時に必要なユーザー情報の抽出の判断は、エージェントにより自動的に行われます。

```python
from agno.memory.v2.db.sqlite import SqliteMemoryDb
from agno.memory.v2.memory import Memory
from agno.models.openai import OpenAIChat
from agno.agent import Agent

# ユーザー記憶データベース（SQLite）とメモリマネージャの準備
memory_db = SqliteMemoryDb(table_name="memory", db_file="tmp/memory.db")
memory = Memory(db=memory_db, model=OpenAIChat(id="gpt-4o-mini"))

# エージェントの生成（ユーザーIDとメモリを設定）
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    user_id="peter_rabbit",           # 固定のユーザーID（ユーザーごとの記憶を管理）
    memory=memory,                    # メモリを組み込む
    enable_agentic_memory=True,       # エージェントが動的に記憶を作成・管理する機能を有効化
    add_datetime_to_instructions=True,
    markdown=True
)

# ユーザーの自己紹介を入力して記憶に学習させる
agent.print_response("私の名前はピーターラビットで、好物はニンジンです。")
# 記憶データベースからユーザー情報を取得し確認
memories = memory.get_user_memories(user_id="peter_rabbit")
print("Memories:", memories)
# 過去の記憶を踏まえて質問
agent.print_response("私の好きな食べ物は何でしたか？", stream=True)

memory.clear()  # メモリの内容を消去
```

```text
▰▰▰▰▰▰▰ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 私の名前はピーターラビットで、好物はニンジンです。                                                              ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
Memories: [UserMemory(memory='ユーザーの好物はニンジンです。', topics=['likes', 'food'], input='ユーザーの好物はニンジンであることを保存する。', last_updated=datetime.datetime(2025, 4, 20, 19, 45, 24, 763141), memory_id='daab7298-8771-4fbb-aae9-af69d96e3724'), UserMemory(memory='ユーザーの名前はピーターラビットです。', topics=['name'], input='ユーザーの名前をピーターラビットとして保存する。', last_updated=datetime.datetime(2025, 4, 20, 19, 45, 22, 874759), memory_id='3c0c068a-009f-4fda-a447-5ddc9357ea2a')]
▰▰▱▱▱▱▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 私の好きな食べ物は何でしたか？                                                                                  ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (0.9s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ あなたの好きな食べ物はニンジンです！                                                                            ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 5. 推論ツールを使用したエージェント

ツールとしてReasoningToolsを渡すことで、推論モデルのような複数ステップのCoTを実現し、複雑な問題に対する回答の精度を上げられます。

```python
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.tools.reasoning import ReasoningTools

thinking_agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    tools=[
        ReasoningTools(add_instructions=True)
    ],
    instructions="You are a reasoning agent. You are given a task and you need to reason about it.",
    show_tool_calls=True,
    markdown=True,
)

thinking_agent.print_response(("""\n
次の数学の問題を解いてください：

3次方程式 x^3 - 6x^2 + 11x - 6 = 0 の全ての解を求めなさい。
また、この方程式の解と係数の関係について説明しなさい。
"""), stream=True)
```

```text
▰▰▰▰▰▰▰ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┃ 次の数学の問題を解いてください：                                                                                ┃
┃                                                                                                                 ┃
┃ 3次方程式 x^3 - 6x^2 + 11x - 6 = 0 の全ての解を求めなさい。                                                     ┃
┃ また、この方程式の解と係数の関係について説明しなさい。                                                          ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 1 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解の計算手順の整理                                                                                              ┃
┃ Action: calculate                                                                                               ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 2 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 有理数解の定理を使用して解を探索                                                                                ┃
┃ Action: calculate                                                                                               ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 3 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解候補のテスト                                                                                                  ┃
┃ Action: test solutions                                                                                          ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 4 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解候補のテスト                                                                                                  ┃
┃ Action: test solutions                                                                                          ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 5 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解候補のテスト                                                                                                  ┃
┃ Action: test solutions                                                                                          ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 6 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ x = 1 をテストする                                                                                              ┃
┃ Action: test solution                                                                                           ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 7 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ x = 2 をテストする                                                                                              ┃
┃ Action: test solution                                                                                           ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 8 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ x = 3 をテストする                                                                                              ┃
┃ Action: test solution                                                                                           ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 9 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解をまとめる                                                                                                    ┃
┃ Action: summarize results                                                                                       ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 10 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ Vietaの定理を適用する                                                                                           ┃
┃ Action: apply Vieta's theorem                                                                                   ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 11 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ 解の要約                                                                                                        ┃
┃ 方程式 x^3 - 6x^2 + 11x - 6 の解は x = 1, 2, 3 である。                                                         ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Reasoning step 12 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ Vietaの定理による確認                                                                                           ┃
┃ Vietaの定理に基づいて解の和は1 + 2 + 3 = 6 であり、解の積は1*2*3 = 6である。                                    ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Tool Calls ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ • think(title=解の計算手順の整理, thought=与えられた3次方程式x^3 - 6x^2 + 11x - 6 =                             ┃
┃ 0を解くには、まず因数分解を試みることができます。数値から、可能性のある解を探るために、ラフ・フォーレンス法（有 ┃
┃ 理数解の定理を使用）を使って解を見つけ、その後必要であれば合成除法を使用して残りの方程式を解きます。次に、解と  ┃
┃ 係数の関係（Vietaの定理）を考えます。具体的には、解の和と積などを計算します。, action=calculate,                ┃
┃ confidence=0.9)                                                                                                 ┃
┃ • think(title=有理数解の定理を使用して解を探索,                                                                 ┃
┃ thought=有理数解の定理によれば、方程式の整数係数に基づいて、解の候補は定数項の因数（-6）を分母とし、最高次の係  ┃
┃ 数の因数（1）を分子とする。したがって、解の候補は±1、±2、±3、±6です。これを用いて、これらの解を方程式に代入して ┃
┃ みて、どれが解となるかを調べます。, action=calculate, confidence=0.9)                                           ┃
┃ • think(title=解候補のテスト, thought=解候補 ±1、±2、±3、±6 をそれぞれ方程式x^3 - 6x^2 + 11x - 6                ┃
┃ に代入して、どれが0に等しくなるか確認します。, action=test solutions, confidence=0.9)                           ┃
┃ • think(title=解候補のテスト, thought=実際に解候補を代入していくつかの計算を行います。特に、x = 1, 2, 3         ┃
┃ の場合を計算してみます。, action=test solutions, confidence=0.9)                                                ┃
┃ • think(title=解候補のテスト, thought=実際に解候補を代入していくつかの計算を行います。特に、x = 1, 2, 3         ┃
┃ の場合を計算してみます。, action=test solutions, confidence=0.9)                                                ┃
┃ • think(title=x = 1 をテストする, thought=x = 1 の場合、式に代入すると、1^3 - 6*1^2 + 11*1 - 6 = 0              ┃
┃ となります。これにより、x = 1 が解の一つであることが分かります。, action=test solution, confidence=1)           ┃
┃ • think(title=x = 2 をテストする, thought=x = 2 の場合、式に代入すると、2^3 - 6*2^2 + 11*2 - 6 = 0              ┃
┃ となります。これにより、x = 2 が解の一つであることが分かります。, action=test solution, confidence=1)           ┃
┃ • think(title=x = 3 をテストする, thought=x = 3 の場合、式に代入すると、3^3 - 6*3^2 + 11*3 - 6 = 0              ┃
┃ となります。これにより、x = 3 が解の一つであることが分かります。, action=test solution, confidence=1)           ┃
┃ • think(title=解をまとめる, thought=x = 1, x = 2, x = 3                                                         ┃
┃ がそれぞれ方程式の解であることを確認しました。これらの解から、方程式は (x-1)(x-2)(x-3)                          ┃
┃ の形に因数分解できることがわかります。, action=summarize results, confidence=0.95)                              ┃
┃ • think(title=Vietaの定理を適用する,                                                                            ┃
┃ thought=Vietaの定理により、3次方程式の解の和は係数-(-6)であるし、解の積は-(-6)であるべきです。解を用いて、これ  ┃
┃ らの関係を確認します。, action=apply Vieta's theorem, confidence=0.95)                                          ┃
┃ • analyze(title=解の要約, result=方程式 x^3 - 6x^2 + 11x - 6 の解は x = 1, 2, 3 である。,                       ┃
┃ analysis=これらの解は全て元の方程式を満たし、因数分解すると (x-1)(x-2)(x-3)                                     ┃
┃ の形になる。これにより、解の数が正しくかつ、すべての実数解が得られたことが確認できる。,                         ┃
┃ next_action=final_answer, confidence=1)                                                                         ┃
┃ • analyze(title=Vietaの定理による確認, result=Vietaの定理に基づいて解の和は1 + 2 + 3 = 6 であり、解の積は1*2*3  ┃
┃ = 6である。,                                                                                                    ┃
┃ analysis=この結果は方程式の係数と一致しているため、解の和と積の関係が正しいことが確認できる。さらに、係数-(-6)  ┃
┃ は正しいことがわかる。, next_action=final_answer, confidence=1)                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (31.0s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┃                                                      結論                                                       ┃
┃                                                                                                                 ┃
┃ 与えられた方程式 ( x^3 - 6x^2 + 11x - 6 = 0 ) の解は以下の通りです：                                            ┃
┃                                                                                                                 ┃
┃  • 解:                                                                                                          ┃
┃     • ( x = 1 )                                                                                                 ┃
┃     • ( x = 2 )                                                                                                 ┃
┃     • ( x = 3 )                                                                                                 ┃
┃                                                                                                                 ┃
┃ これらは元の方程式を満たしており、因数分解すると次のようになります： [ (x - 1)(x - 2)(x - 3) = 0 ]              ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┃                                         係数と解との関係についての説明                                          ┃
┃                                                                                                                 ┃
┃ この方程式における係数と解の関係は、Vietaの定理に基づいています。                                               ┃
┃                                                                                                                 ┃
┃  1 解の和: 解の和は係数の逆数であるため、( 1 + 2 + 3 = 6 ) は、元の方程式における ( -(-6) ) に一致します。      ┃
┃  2 解の積: 解の積は ( 1 \times 2 \times 3 = 6 ) となり、これも元の方程式における ( -(-6) ) と一致します。       ┃
┃                                                                                                                 ┃
┃ このように、解の和と積が、方程式の係数（特に最高次項の係数に対する定数項の係数）と一致することから、これらの解  ┃
┃ が正しいことが確認されました。                                                                                  ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 6. MCP（Model-Context Protocol）を使用したエージェント

MCPを使用して外部ツールと連携するエージェントの例です。ここではカレンダー機能に関するMCPのmockを作成し、それをエージェントに繋いでいます。

```python
%%writefile mcp_calendar_mock.py

import logging
from mcp.server.fastmcp import FastMCP

# Initialize FastMCP server
mcp = FastMCP("calendar")

@mcp.tool()
def make_calendar_event(start_datetime: str, end_datetime: str, title: str, description: str) -> str:
    """
    カレンダーに予定を追加するツール
    
    Args:
        start_datetime: 予定の開始時間("YYYY-MM-DD HH:MM" 形式)
        end_datetime: 予定の終了時間("YYYY-MM-DD HH:MM" 形式)
        title: 予定のタイトル
        description: 予定の説明
    """
    # mockサーバーなので実際の処理は省略する
    return "予定を追加しました"


if __name__ == "__main__":
    # Initialize and run the server
    logging.basicConfig(level=logging.INFO)
    logging.info("Starting calendar MCP server...")
    mcp.run(transport='stdio')
```

```python
%%writefile mcp_agent.py

import asyncio
from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.tools.mcp import MCPTools

async def run_filesystem_agent(query: str):
    # `npx`でファイルシステム用MCPサーバを起動し、指定ディレクトリをアクセス許可
    command = f"uv run mcp_calendar_mock.py"

    async with MCPTools(command) as calendar_tools:
        # ツールとしてMCP経由のファイルシステムアクセスを組み込んだエージェントを生成
        agent = Agent(
            model=OpenAIChat(id="gpt-4o-mini"),
            tools=[calendar_tools],
            instructions="あなたはカレンダー管理アシスタントです。ユーザーの要望に応じて新しい予定をカレンダーに追加することが出来ます。",
            markdown=True,
            show_tool_calls=True    # ツール呼び出しをログ表示
        )
        # ユーザーの問い合わせに応答（必要に応じてファイル操作ツールを使用）
        await agent.aprint_response(query)

# エージェントを実行してファイル一覧を取得する例
asyncio.run(
    run_filesystem_agent(
        "株式会社モデルコンテキストとのPJ-1234のミーティングの予定を入れてください。時刻は2025-04-15 10:00-11:00 です。"
    )
)
```

```python
!python mcp_agent.py
```

```text
[04/20/25 19:46:32] INFO     Starting calendar MCP server...                                                       mcp_calendar_mock.py:26
                    INFO     Processing request of type ListToolsRequest                                                     server.py:534
▰▰▰▰▰▰▱ Thinking...
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                                        ┃
┃ 株式会社モデルコンテキストとのPJ-1234のミーティングの予定を入れてください。時刻は2025-04-15 10:00-11:00 です。                         ┃
┃                                                                                                                                        ┃┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Tool Calls ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                                        ┃
┃ • make_calendar_event(start_datetime=2025-04-15 10:00, end_datetime=2025-04-15 11:00, title=PJ-1234 ミーティング,                      ┃
┃ description=株式会社モデルコンテキストとのPJ-1234に関するミーティング)                                                                 ┃
┃                                                                                                                                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (4.4s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                                        ┃
┃ 以下の予定をカレンダーに追加しました。                                                                                                 ┃
┃                                                                                                                                        ┃
┃  • タイトル: PJ-1234 ミーティング                                                                                                      ┃
┃  • 日時: 2025年4月15日 10:00 - 11:00                                                                                                   ┃
┃  • 説明: 株式会社モデルコンテキストとのPJ-1234に関するミーティング                                                                     ┃
┃                                                                                                                                        ┃
┃ 今後ともお気軽にご依頼ください！                                                                                                       ┃
┃                                                                                                                                        ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## 7. マルチエージェントチーム

マルチエージェントを使用すると、複数のエージェントをチームとして協力させて回答生成が行えます。マルチエージェントにはいくつか協力方法に応じてモードがあります。下記では `Coordinate` モードを使用しています。このモードではユーザークエリに回答する際のステップを複数に分割し、それぞれを適切なエージェントに割り当てて回答生成を行います。

```python
from agno.agent import Agent
from agno.team.team import Team
from agno.models.openai import OpenAIChat
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.tools.yfinance import YFinanceTools
from agno.tools.reasoning import ReasoningTools

# 各メンバーエージェントの定義
web_agent = Agent(
    name="Web検索エージェント",
    role="ウェブ検索で最新情報を集める",
    model=OpenAIChat(id="gpt-4o-mini"),
    tools=[DuckDuckGoTools()],            # ウェブ検索ツール
    instructions="必ず情報源のURLを引用してください。",
    add_datetime_to_instructions=True
)
finance_agent = Agent(
    name="金融分析エージェント",
    role="株価や財務データの分析を行う",
    model=OpenAIChat(id="gpt-4o-mini"),
    tools=[YFinanceTools(stock_price=True, analyst_recommendations=True, company_info=True)],
    instructions="データは表形式で出力してください。",
    add_datetime_to_instructions=True
)

# チームリーダー（Team）の定義（コーディネートモード）
team_leader = Team(
    name="分析チームリーダー",
    mode="coordinate",                          # 順次調整モードで実行
    model=OpenAIChat(id="gpt-4o-mini"),# リーダー自身は高度なモデルを使用
    members=[web_agent, finance_agent],         # チームメンバーを登録
    tools=[ReasoningTools(add_instructions=True)], # 推論支援ツール（思考の分解用）
    instructions=[
        "最終的な回答のみを出力してください（途中経過や理由付けは出さないこと）。",
        "回答には必ず根拠となるデータや出典を含めてください。"
    ],
    markdown=True,
    enable_agentic_context=True,   # メンバーのコンテキストをリーダーが共有
    success_criteria="チームがタスクを完了し、包括的な分析結果を得ること。"
)

# ユーザーからのタスク要求
task_request = """\
NVIDIAの市場パフォーマンスを分析し、それを最新のニュースとの関連から、どのようなことが起きてそれがどのように株価に反映されているかを分析してください。
"""
# チームでタスクを実行し、結果をストリーミング表示
team_leader.print_response(task_request, stream=True, show_full_reasoning=True)
```

```text
┏━ Message ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ NVIDIAの市場パフォーマンスを分析し、それを最新のニュースとの関連から、どのようなことが起きてそれがどのように株  ┃
┃ 価に反映されているかを分析してください。                                                                        ┃
┃                                                                                                                 ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Team Tool Calls ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃ • transfer_task_to_member(member_id=金融分析エージェント,                                                       ┃
┃   task_description=NVIDIAの最新の株価データ、過去の市場パフォーマンス、アナリストの推奨を収集し分析する。,      ┃
┃   expected_output=NVIDIAの最新の株価、過去の市場パフォーマンス、アナリストの推奨に関する分析結果。)             ┃
┃                                                                                                                 ┃
┃ • transfer_task_to_member(member_id=web検索エージェント,                                                        ┃
┃ task_description=NVIDIAに関する最新のニュース記事を検索し、株価と関連するトピックを抽出する。,                  ┃
┃   expected_output=NVIDIAに関する最新のニュース記事及びそれが株価に与える影響の分析結果。)                       ┃
┃                                                                                                                 ┃
┃ • set_shared_context(state=NVIDIAの分析結果: 最新の株価は101.49                                                 ┃
┃ USDで、過去の市場パフォーマンスは過去1ヶ月で約7%の急落を見せている。これは主に米国の対中チップ販売制限による    ┃
┃   もので現在も懸念が続いている。また、アナリストの推奨は「強い買い」とされ、AI市場での強い成長が期待されている  ┃
┃ が、短期的には不透明感が影響している。)                                                                         ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
┏━ Response (38.3s) ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                                                                                                                 ┃
┃                                         NVIDIAの市場パフォーマンス分析                                          ┃
┃                                                                                                                 ┃
┃ 最新の株価: 101.49 USD                                                                                          ┃
┃ 過去の市場パフォーマンス: 過去1ヶ月で約7%の急落                                                                 ┃
┃                                                                                                                 ┃
┃ NVIDIAの市場パフォーマンスは、主にアメリカ政府による対中チップ販売制限の影響を受けています。この政策は、企業の  ┃
┃ 将来的な売上見通しに対する不透明感を引き起こし、急激な株価の下落を招きました。最新の情報では、NVIDIAの株価は急  ┃
┃ 落し、現在の株価は101.49 USDです。                                                                              ┃
┃                                                                                                                 ┃
┃                                                ニュースとの関連                                                 ┃
┃                                                                                                                 ┃
┃ 最近のニュースで特に注目すべきは以下の内容です:                                                                 ┃
┃                                                                                                                 ┃
┃  1 米国の対中チップ販売制限により、NVIDIAのCEOが北京を訪問し状況を説明している。また、販売制限により55億ドルの  ┃
┃    売上が影響を受ける可能性があるという報告もあります。                                                         ┃
┃  2 AI技術の需要が依然として高く、長期的にはAI市場での成長が期待されている一方、短期的には政策の影響により市場の ┃
┃    混乱が続いています。                                                                                         ┃
┃                                                                                                                 ┃
┃                                                アナリストの推奨                                                 ┃
┃                                                                                                                 ┃
┃ アナリストの間ではNVIDIAは「強い買い」とされており、長期的な成長が期待されています未来への期待があっても、短期  ┃
┃ 的には政治的な不透明性が影響を与えており、市場の動向に注意が必要です。                                          ┃
┃                                                                                                                 ┃
┃ このように、NVIDIAの株価は短期的な要因と長期的な成長期待が交錯する中で動いており、今後の市場動向には注目が必要  ┃
┃ です。                                                                                                          ┃
┃                                                                                                                 ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
```

## まとめ

このチュートリアルでは、Agnoフレームワークを使用した様々なエージェントの実装方法を紹介しました。
